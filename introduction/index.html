<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" /><meta name="generator" content="Docutils 0.18.1: http://docutils.sourceforge.net/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Introduction &mdash; GROMACS GPU Performance</title>
      <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
      <link rel="stylesheet" href="../_static/mystnb.4510f1fc1dee50b3e5859aac5469c37c29e427902b24a333a5f9fcb2f0b3ac41.css" type="text/css" />
      <link rel="stylesheet" href="../_static/copybutton.css" type="text/css" />
      <link rel="stylesheet" href="../_static/togglebutton.css" type="text/css" />
      <link rel="stylesheet" href="../_static/sphinx_lesson.css" type="text/css" />
      <link rel="stylesheet" href="../_static/sphinx_rtd_theme_ext_color_contrast.css" type="text/css" />
      <link rel="stylesheet" href="../_static/tabs.css" type="text/css" />
    <link rel="shortcut icon" href="../_static/favicon.ico"/>
  <!--[if lt IE 9]>
    <script src="../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
        <script src="../_static/jquery.js"></script>
        <script src="../_static/underscore.js"></script>
        <script src="../_static/_sphinx_javascript_frameworks_compat.js"></script>
        <script src="../_static/doctools.js"></script>
        <script src="../_static/sphinx_highlight.js"></script>
        <script src="../_static/clipboard.min.js"></script>
        <script src="../_static/copybutton.js"></script>
        <script src="../_static/minipres.js"></script>
        <script>let toggleHintShow = 'Click to show';</script>
        <script>let toggleHintHide = 'Click to hide';</script>
        <script>let toggleOpenOnPrint = 'true';</script>
        <script src="../_static/togglebutton.js"></script>
        <script>var togglebuttonSelector = '.toggle, .admonition.dropdown';</script>
        <script data-domain="enccs.github.io/gromacs-gpu-performance" defer="defer" src="https://plausible.io/js/script.js"></script>
    <script src="../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../genindex/" />
    <link rel="search" title="Search" href="../search/" />
    <link rel="next" title="Understanding Puhti GPU nodes" href="../puhti/" />
    <link rel="prev" title="GROMACS GPU performance" href="../" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="../" class="icon icon-home">
            GROMACS GPU Performance
              <img src="../_static/ENCCS.jpg" class="logo" alt="Logo"/>
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search/" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">The lesson</span></p>
<ul class="current">
<li class="toctree-l1 current"><a class="current reference internal" href="#">Introduction</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#why-do-we-need-good-performance-from-gromacs">Why do we need good performance from GROMACS</a></li>
<li class="toctree-l2"><a class="reference internal" href="#when-do-we-not-care-about-performance-efficiency">When do we <em>not</em> care about performance/efficiency?</a></li>
<li class="toctree-l2"><a class="reference internal" href="#easy-global-wins">Easy global wins</a></li>
<li class="toctree-l2"><a class="reference internal" href="#see-also">See also</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../puhti/">Understanding Puhti GPU nodes</a></li>
<li class="toctree-l1"><a class="reference internal" href="../cpu-runs/">Using CPUs efficiently</a></li>
<li class="toctree-l1"><a class="reference internal" href="../md-algorithm/">Getting performance from the MD algorithm</a></li>
<li class="toctree-l1"><a class="reference internal" href="../using-pme/">Performant PME simulations</a></li>
<li class="toctree-l1"><a class="reference internal" href="../multi-gpu/">Using multiple GPUs</a></li>
<li class="toctree-l1"><a class="reference internal" href="../general-considerations/">General considerations for performance</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Reference</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../quick-reference/">Quick Reference</a></li>
<li class="toctree-l1"><a class="reference internal" href="../guide/">Instructor’s guide</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../">GROMACS GPU Performance</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../" class="icon icon-home" aria-label="Home"></a></li>
      <li class="breadcrumb-item active">Introduction</li>
      <li class="wy-breadcrumbs-aside">
              <a href="https://github.com/ENCCS/gromacs-gpu-performance/blob/master/content/introduction.rst" class="fa fa-github"> Edit on GitHub</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="introduction">
<h1>Introduction<a class="headerlink" href="#introduction" title="Permalink to this heading"></a></h1>
<div class="admonition-questions questions admonition" id="questions-0">
<p class="admonition-title">Questions</p>
<ul class="simple">
<li><p>Why is getting good performance important?</p></li>
<li><p>When should I not care about getting good performance?</p></li>
</ul>
</div>
<div class="admonition-objectives objectives admonition" id="objectives-0">
<p class="admonition-title">Objectives</p>
<ul class="simple">
<li><p>Know the scientific value of GROMACS performance</p></li>
<li><p>Know the human value of getting “good enough” performance</p></li>
</ul>
</div>
<section id="why-do-we-need-good-performance-from-gromacs">
<h2>Why do we need good performance from GROMACS<a class="headerlink" href="#why-do-we-need-good-performance-from-gromacs" title="Permalink to this heading"></a></h2>
<p>Molecular dynamics simulations iteratively solve equations of motion
to sample a thermodynamic ensemble. Particle positions are used to
compute forces, which update velocities, which in turn update the
positions to new values. This procedure iterates often billions of
times. Eventually we will sample all parts of the ensemble,
ie. “solve” the equations of motion.</p>
<p>The time steps involved are normally femtoseconds, however we normally
want to make conclusions about macroscopic observables that change
much more slowly. Since we need to make very many observations to have
a statistically relevant sampling from the ensemble, it’s important to
make sure that each of those tiny time steps is computed as
efficiently as possible. The more observations you make, the more
likely your scientific conclusions are reliable. That is why so much
effort has gone into engineering GROMACS to compute those as
efficiently as possible. Your compute budget is probably limited and
you want to get the best value from it.</p>
<p>If you just run <cite>gmx mdrun</cite> then it looks at your simulation and the
available hardware and does an OK job at guessing what might be best.
Sometimes it tries some alternative equivalent approaches and uses the
most efficient one. Unfortunately the range of possible simulations
and available hardware is huge, so the automation often doesn’t get
the best result. Sometimes you need to get involved and guide the
choice.</p>
</section>
<section id="when-do-we-not-care-about-performance-efficiency">
<h2>When do we <em>not</em> care about performance/efficiency?<a class="headerlink" href="#when-do-we-not-care-about-performance-efficiency" title="Permalink to this heading"></a></h2>
<p>There’s a trade-off between human time and computer time. Computers are
cheaper than humans, and it can be a false economy to spend a lot of
human time in order to work out how to use less computer time.</p>
<ul class="simple">
<li><p>If it’s a very short-lived task, like the minimization and
equilibration phases of an MD simulation, then generally you should
just accept the default performance.</p></li>
<li><p>If it’s a something you will do only once, don’t worry much about
optimizing it.</p></li>
<li><p>If you’re just beginning your work with GROMACS, focus on learning
new things, not maximizing performance.</p></li>
</ul>
<p>Rule of thumb: Unless you’re going to run the same kind of simulation
on the same hardware for more than a week, reading another paper or
designing another simulation will be a better use of your time than
playing with anything in this tutorial. The computer can do your
simulation in the background and you’ve done something profitable in
the meantime.</p>
</section>
<section id="easy-global-wins">
<h2>Easy global wins<a class="headerlink" href="#easy-global-wins" title="Permalink to this heading"></a></h2>
<p>When performance matters, you should be running <cite>mdrun</cite> on a cluster
where the sysadmins have typically done a good job installing GROMACS
for you. But maybe your sysadmin is an over-worked postdoc,
etc. <cite>mdrun</cite> reports in the log file how it was built, and it is worth
knowing what to look for, so you can either suggest an improvement or
do it yourself. This will improve things every time you run <cite>mdrun</cite>.
You can also see this output from <code class="docutils literal notranslate"><span class="pre">gmx</span> <span class="pre">-version</span></code> or <code class="docutils literal notranslate"><span class="pre">gmx_mpi</span>
<span class="pre">-version</span></code>.</p>
<p>Key points:</p>
<ul class="simple">
<li><p>seek to use the latest version of compilers, GPU drivers, GPU libraries</p></li>
<li><p>check the log file for warnings that GROMACS could be configured
better for your hardware</p></li>
<li><p>don’t use a version compiled with double precision unless you know
a specific reason why you need to</p></li>
</ul>
<figure class="align-center" id="id1">
<img alt="../_images/checking-gromacs-configuration.svg" src="../_images/checking-gromacs-configuration.svg" /><figcaption>
<p><span class="caption-text">Checking the build configuration of GROMACS will run fast.</span><a class="headerlink" href="#id1" title="Permalink to this image"></a></p>
</figcaption>
</figure>
</section>
<section id="see-also">
<h2>See also<a class="headerlink" href="#see-also" title="Permalink to this heading"></a></h2>
<p>Check
<a class="reference external" href="https://manual.gromacs.org/current/user-guide/mdrun-performance.html#gromacs-configuration">https://manual.gromacs.org/current/user-guide/mdrun-performance.html#gromacs-configuration</a>
for the current list of suggestions from the GROMACS developers.</p>
<div class="admonition-keypoints keypoints admonition" id="keypoints-0">
<p class="admonition-title">Keypoints</p>
<ul class="simple">
<li><p>Consider optimizing long-running production simulations</p></li>
<li><p>Otherwise, go do something with scientific value!</p></li>
</ul>
</div>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="../" class="btn btn-neutral float-left" title="GROMACS GPU performance" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="../puhti/" class="btn btn-neutral float-right" title="Understanding Puhti GPU nodes" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2020, EuroCC National Competence Centre Sweden.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>